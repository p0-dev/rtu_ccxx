:: ***************************************************************************************
:: MAKING PROJECT BATCH SCRIPT
:: ***************************************************************************************
:: @name      : make.cmd
:: @desc      : making project, including clean (opt) -> gen -> build
:: @location  : project_root_dir/script/windows
:: ***************************************************************************************


:: =======================================================================================
:: Pre-Processing
:: ---------------------------------------------------------------------------------------
@echo off
set HERE=%cd%


:: =======================================================================================
:: [Optional] Cleaning
:: ---------------------------------------------------------------------------------------
if "all" == "%~1%" (
  cd %HERE%
  call %HERE%/clean.cmd
  if [%STD_RETURN_FAIL% == %errorlevel%] (
    echo -- [Error][Make] Failed at clean.cmd
    exit /b %STD_RETURN_FAIL%
  )
)


:: =======================================================================================
:: [Process] Generation
:: ---------------------------------------------------------------------------------------
cd %HERE%
call %HERE%/gen.cmd
if %STD_RETURN_FAIL% == %errorlevel% (
  echo -- [Error][Make] Failed at gen.cmd
  exit /b %STD_RETURN_FAIL%
)


:: =======================================================================================
:: [Process] Building
:: ---------------------------------------------------------------------------------------
cd %HERE%
call %HERE%/build.cmd
if %STD_RETURN_FAIL% == %errorlevel% (
  echo -- [Error][Make] Failed at build.cmd
  exit /b %STD_RETURN_FAIL%
)


:: ======================================================================================
:: Post Processing
:: --------------------------------------------------------------------------------------
cd %HERE%
exit /b %STD_RETURN_OK%


:: ***************************************************************************************
:: THE END
:: ***************************************************************************************